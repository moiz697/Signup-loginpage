{"ast":null,"code":"import _slicedToArray from\"/Users/moiz/Desktop/Signup-loginpage/Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useRef}from\"react\";import{useNavigate}from\"react-router-dom\";import Form from\"react-validation/build/form\";import Input from\"react-validation/build/input\";import CheckButton from\"react-validation/build/button\";import AuthService from\"../services/auth.service\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var required=function required(value){if(!value){return/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback d-block\",children:\"This field is required!\"});}};var Login=function Login(){var form=useRef();var checkBtn=useRef();var navigate=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loginClicked=_useState10[0],setLoginClicked=_useState10[1];// New state for tracking the login click\nvar _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),showPassword=_useState12[0],setShowPassword=_useState12[1];// New state for the show password feature\nvar onChangeUsername=function onChangeUsername(e){setUsername(e.target.value);};var onChangePassword=function onChangePassword(e){setPassword(e.target.value);};var handleLogin=function handleLogin(e){e.preventDefault();setMessage(\"\");setLoading(true);form.current.validateAll();if(checkBtn.current.context._errors.length===0){AuthService.login(username,password).then(function(){navigate(\"/profile\");window.location.reload();},function(error){var resMessage=error.response&&error.response.data&&error.response.data.message||error.message||error.toString();setLoading(false);setMessage(resMessage);});}else{setLoading(false);}};var handleLoginClick=function handleLoginClick(){// Update the loginClicked state to true\nsetLoginClicked(true);// Redirect the user to the login page after a small delay (optional)\nsetTimeout(function(){window.location.href='/forgot-password';// Replace '/login' with the correct path to your login page\n},500);// Delay the navigation to give time for the success message to show (optional)\n};var handleShowPassword=function handleShowPassword(){setShowPassword(function(prevShowPassword){return!prevShowPassword;});};return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card card-container\",children:/*#__PURE__*/_jsxs(Form,{onSubmit:handleLogin,ref:form,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Username\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",className:\"form-control\",name:\"username\",value:username,onChange:onChangeUsername,validations:[required]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(Input,{type:showPassword?\"text\":\"password\",className:\"form-control\",name:\"password\",value:password,onChange:onChangePassword,validations:[required]}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group-append\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-secondary btn-sm\"// Use btn-sm class for smaller button\n,type:\"button\",onClick:handleShowPassword,children:showPassword?\"Hide\":\"Show\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary btn-block\",disabled:loading,children:[loading&&/*#__PURE__*/_jsx(\"span\",{className:\"spinner-border spinner-border-sm\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Login\"})]})}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:message})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"span\",{className:\"Forgetpassword\",onClick:handleLoginClick,style:{color:\"blue\",marginTop:\"10px\"},children:\"Forgot password\"})}),/*#__PURE__*/_jsx(CheckButton,{style:{display:\"none\"},ref:checkBtn})]})})});};export default Login;","map":{"version":3,"sources":["/Users/moiz/Desktop/Signup-loginpage/Frontend/src/components/Login.js"],"names":["React","useState","useRef","useNavigate","Form","Input","CheckButton","AuthService","required","value","Login","form","checkBtn","navigate","username","setUsername","password","setPassword","loading","setLoading","message","setMessage","loginClicked","setLoginClicked","showPassword","setShowPassword","onChangeUsername","e","target","onChangePassword","handleLogin","preventDefault","current","validateAll","context","_errors","length","login","then","window","location","reload","error","resMessage","response","data","toString","handleLoginClick","setTimeout","href","handleShowPassword","prevShowPassword","color","marginTop","display"],"mappings":"mIAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,MAA1B,KAAwC,OAAxC,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,MAAOC,CAAAA,IAAP,KAAiB,6BAAjB,CACA,MAAOC,CAAAA,KAAP,KAAkB,8BAAlB,CACA,MAAOC,CAAAA,WAAP,KAAwB,+BAAxB,CAEA,MAAOC,CAAAA,WAAP,KAAwB,0BAAxB,C,wFAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,KAAD,CAAW,CAC1B,GAAI,CAACA,KAAL,CAAY,CACV,mBACE,YAAK,SAAS,CAAC,0BAAf,UAA0C,yBAA1C,EADF,CAKD,CACF,CARD,CAUA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,EAAM,CAClB,GAAMC,CAAAA,IAAI,CAAGT,MAAM,EAAnB,CACA,GAAMU,CAAAA,QAAQ,CAAGV,MAAM,EAAvB,CACA,GAAMW,CAAAA,QAAQ,CAAGV,WAAW,EAA5B,CAEA,cAAgCF,QAAQ,CAAC,EAAD,CAAxC,wCAAOa,QAAP,eAAiBC,WAAjB,eACA,eAAgCd,QAAQ,CAAC,EAAD,CAAxC,yCAAOe,QAAP,eAAiBC,WAAjB,eACA,eAA8BhB,QAAQ,CAAC,KAAD,CAAtC,yCAAOiB,OAAP,eAAgBC,UAAhB,eACA,eAA8BlB,QAAQ,CAAC,EAAD,CAAtC,yCAAOmB,OAAP,eAAgBC,UAAhB,eACA,eAAwCpB,QAAQ,CAAC,KAAD,CAAhD,0CAAOqB,YAAP,gBAAqBC,eAArB,gBAAyD;AACzD,gBAAwCtB,QAAQ,CAAC,KAAD,CAAhD,2CAAOuB,YAAP,gBAAqBC,eAArB,gBAAyD;AAEzD,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,CAAD,CAAO,CAC9BZ,WAAW,CAACY,CAAC,CAACC,MAAF,CAASnB,KAAV,CAAX,CACD,CAFD,CAIA,GAAMoB,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACF,CAAD,CAAO,CAC9BV,WAAW,CAACU,CAAC,CAACC,MAAF,CAASnB,KAAV,CAAX,CACD,CAFD,CAIA,GAAMqB,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACH,CAAD,CAAO,CACzBA,CAAC,CAACI,cAAF,GAEAV,UAAU,CAAC,EAAD,CAAV,CACAF,UAAU,CAAC,IAAD,CAAV,CAEAR,IAAI,CAACqB,OAAL,CAAaC,WAAb,GAEA,GAAIrB,QAAQ,CAACoB,OAAT,CAAiBE,OAAjB,CAAyBC,OAAzB,CAAiCC,MAAjC,GAA4C,CAAhD,CAAmD,CACjD7B,WAAW,CAAC8B,KAAZ,CAAkBvB,QAAlB,CAA4BE,QAA5B,EAAsCsB,IAAtC,CACE,UAAM,CACJzB,QAAQ,CAAC,UAAD,CAAR,CACA0B,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GACD,CAJH,CAKE,SAACC,KAAD,CAAW,CACT,GAAMC,CAAAA,UAAU,CACbD,KAAK,CAACE,QAAN,EACCF,KAAK,CAACE,QAAN,CAAeC,IADhB,EAECH,KAAK,CAACE,QAAN,CAAeC,IAAf,CAAoBzB,OAFtB,EAGAsB,KAAK,CAACtB,OAHN,EAIAsB,KAAK,CAACI,QAAN,EALF,CAOA3B,UAAU,CAAC,KAAD,CAAV,CACAE,UAAU,CAACsB,UAAD,CAAV,CACD,CAfH,EAiBD,CAlBD,IAkBO,CACLxB,UAAU,CAAC,KAAD,CAAV,CACD,CACF,CA7BD,CA+BA,GAAM4B,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,EAAM,CAC7B;AACAxB,eAAe,CAAC,IAAD,CAAf,CACA;AACAyB,UAAU,CAAC,UAAM,CACfT,MAAM,CAACC,QAAP,CAAgBS,IAAhB,CAAuB,kBAAvB,CAA2C;AAC5C,CAFS,CAEP,GAFO,CAAV,CAES;AACV,CAPD,CASA,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,EAAM,CAC/BzB,eAAe,CAAC,SAAC0B,gBAAD,QAAsB,CAACA,gBAAvB,EAAD,CAAf,CACD,CAFD,CAIA,mBACE,YAAK,SAAS,CAAC,WAAf,uBACE,YAAK,SAAS,CAAC,qBAAf,uBAKE,MAAC,IAAD,EAAM,QAAQ,CAAErB,WAAhB,CAA6B,GAAG,CAAEnB,IAAlC,wBAEE,aAAK,SAAS,CAAC,YAAf,wBACE,cAAO,OAAO,CAAC,UAAf,UAA0B,UAA1B,EADF,cAEE,KAAC,KAAD,EACE,IAAI,CAAC,MADP,CAEE,SAAS,CAAC,cAFZ,CAGE,IAAI,CAAC,UAHP,CAIE,KAAK,CAAEG,QAJT,CAKE,QAAQ,CAAEY,gBALZ,CAME,WAAW,CAAE,CAAClB,QAAD,CANf,EAFF,GAFF,cAeE,aAAK,SAAS,CAAC,YAAf,wBACE,cAAO,OAAO,CAAC,UAAf,UAA0B,UAA1B,EADF,cAEE,aAAK,SAAS,CAAC,aAAf,wBACE,KAAC,KAAD,EACE,IAAI,CAAEgB,YAAY,CAAG,MAAH,CAAY,UADhC,CAEE,SAAS,CAAC,cAFZ,CAGE,IAAI,CAAC,UAHP,CAIE,KAAK,CAAER,QAJT,CAKE,QAAQ,CAAEa,gBALZ,CAME,WAAW,CAAE,CAACrB,QAAD,CANf,EADF,cASE,YAAK,SAAS,CAAC,oBAAf,uBACE,eACE,SAAS,CAAC,kCAAmC;AAD/C,CAEE,IAAI,CAAC,QAFP,CAGE,OAAO,CAAE0C,kBAHX,UAKG1B,YAAY,CAAG,MAAH,CAAY,MAL3B,EADF,EATF,GAFF,GAfF,cAsCE,YAAK,SAAS,CAAC,YAAf,uBACE,gBAAQ,SAAS,CAAC,2BAAlB,CAA8C,QAAQ,CAAEN,OAAxD,WACGA,OAAO,eACN,aAAM,SAAS,CAAC,kCAAhB,EAFJ,cAIE,sBAAM,OAAN,EAJF,GADF,EAtCF,CA+CGE,OAAO,eACN,YAAK,SAAS,CAAC,YAAf,uBACE,YAAK,SAAS,CAAC,oBAAf,CAAoC,IAAI,CAAC,OAAzC,UACGA,OADH,EADF,EAhDJ,cAuDA,YAAK,SAAS,CAAC,YAAf,uBACE,aACE,SAAS,CAAC,gBADZ,CAEE,OAAO,CAAE2B,gBAFX,CAGE,KAAK,CAAE,CAAEK,KAAK,CAAE,MAAT,CAAiBC,SAAS,CAAE,MAA5B,CAHT,UAIC,iBAJD,EADF,EAvDA,cAiEE,KAAC,WAAD,EAAa,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAX,CAApB,CAAyC,GAAG,CAAE1C,QAA9C,EAjEF,GALF,EADF,EADF,CA6ED,CA7ID,CA+IA,cAAeF,CAAAA,KAAf","sourcesContent":["import React, { useState, useRef } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport Form from \"react-validation/build/form\";\nimport Input from \"react-validation/build/input\";\nimport CheckButton from \"react-validation/build/button\";\n\nimport AuthService from \"../services/auth.service\";\n\nconst required = (value) => {\n  if (!value) {\n    return (\n      <div className=\"invalid-feedback d-block\">\n        This field is required!\n      </div>\n    );\n  }\n};\n\nconst Login = () => {\n  const form = useRef();\n  const checkBtn = useRef();\n  const navigate = useNavigate();\n\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState(\"\");\n  const [loginClicked, setLoginClicked] = useState(false); // New state for tracking the login click\n  const [showPassword, setShowPassword] = useState(false); // New state for the show password feature\n\n  const onChangeUsername = (e) => {\n    setUsername(e.target.value);\n  };\n\n  const onChangePassword = (e) => {\n    setPassword(e.target.value);\n  };\n\n  const handleLogin = (e) => {\n    e.preventDefault();\n\n    setMessage(\"\");\n    setLoading(true);\n\n    form.current.validateAll();\n\n    if (checkBtn.current.context._errors.length === 0) {\n      AuthService.login(username, password).then(\n        () => {\n          navigate(\"/profile\");\n          window.location.reload();\n        },\n        (error) => {\n          const resMessage =\n            (error.response &&\n              error.response.data &&\n              error.response.data.message) ||\n            error.message ||\n            error.toString();\n\n          setLoading(false);\n          setMessage(resMessage);\n        }\n      );\n    } else {\n      setLoading(false);\n    }\n  };\n\n  const handleLoginClick = () => {\n    // Update the loginClicked state to true\n    setLoginClicked(true);\n    // Redirect the user to the login page after a small delay (optional)\n    setTimeout(() => {\n      window.location.href = '/forgot-password'; // Replace '/login' with the correct path to your login page\n    }, 500); // Delay the navigation to give time for the success message to show (optional)\n  };\n\n  const handleShowPassword = () => {\n    setShowPassword((prevShowPassword) => !prevShowPassword);\n  };\n\n  return (\n    <div className=\"col-md-12\">\n      <div className=\"card card-container\">\n        {/* Other form elements... */}\n        \n      \n\n        <Form onSubmit={handleLogin} ref={form}>\n          {/* Username input */}\n          <div className=\"form-group\">\n            <label htmlFor=\"username\">Username</label>\n            <Input\n              type=\"text\"\n              className=\"form-control\"\n              name=\"username\"\n              value={username}\n              onChange={onChangeUsername}\n              validations={[required]}\n            />\n          </div>\n\n          {/* Password input with show/hide feature */}\n          <div className=\"form-group\">\n            <label htmlFor=\"password\">Password</label>\n            <div className=\"input-group\">\n              <Input\n                type={showPassword ? \"text\" : \"password\"}\n                className=\"form-control\"\n                name=\"password\"\n                value={password}\n                onChange={onChangePassword}\n                validations={[required]}\n              />\n              <div className=\"input-group-append\">\n                <button\n                  className=\"btn btn-outline-secondary btn-sm\" // Use btn-sm class for smaller button\n                  type=\"button\"\n                  onClick={handleShowPassword}\n                >\n                  {showPassword ? \"Hide\" : \"Show\"}\n                </button>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"form-group\">\n            <button className=\"btn btn-primary btn-block\" disabled={loading}>\n              {loading && (\n                <span className=\"spinner-border spinner-border-sm\"></span>\n              )}\n              <span>Login</span>\n            </button>\n          </div>\n\n          {message && (\n            <div className=\"form-group\">\n              <div className=\"alert alert-danger\" role=\"alert\">\n                {message}\n              </div>\n            </div>\n          )}\n            {/* Styled \"Forgot password\" span */}\n        <div className=\"form-group\">\n          <span\n            className=\"Forgetpassword\"\n            onClick={handleLoginClick}\n            style={{ color: \"blue\", marginTop: \"10px\" }}\n          >\n            Forgot password\n          </span>\n        </div>\n\n          <CheckButton style={{ display: \"none\" }} ref={checkBtn} />\n        </Form>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}